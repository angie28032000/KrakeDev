// ------------------------------
// FUNCIÓN: validarPassword
// ------------------------------
// Esta función valida que una contraseña cumpla con las siguientes condiciones:
// 1. Tener entre 8 y 16 caracteres.
// 2. Contener al menos una letra mayúscula.
// 3. Contener al menos un número.
// 4. Contener al menos un caracter especial (*, -, _).
validarPassword = function(password) {
    // Variable que acumulará los mensajes de error
    let errores = "";

    // -------- VALIDAR LONGITUD --------
    // Si la contraseña tiene menos de 8 caracteres
    if (password.length < 8) {
        errores += "La contraseña debe tener al menos 8 caracteres.\n";
    }

    // Si la contraseña tiene más de 16 caracteres
    if (password.length > 16) {
        errores += "La contraseña no debe tener más de 16 caracteres.\n";
    }

    // -------- VALIDAR LETRA MAYÚSCULA --------
    // Variable que indica si hay al menos una mayúscula
    let tieneMayuscula = false;

    // Recorre cada caracter de la contraseña
    for (let i = 0; i < password.length; i++) {
        let caracter = password.charAt(i); // Toma un caracter
        // Verifica si está entre 'A' y 'Z'
        if (caracter >= 'A' && caracter <= 'Z') {
            tieneMayuscula = true; // Marca que hay mayúscula
            break; // Sale del bucle porque ya encontró una
        }
    }

    // Si no tiene mayúscula, agrega un mensaje de error
    if (!tieneMayuscula) {
        errores += "La contraseña debe contener al menos una letra mayúscula.\n";
    }

    // -------- VALIDAR QUE CONTENGA NÚMEROS --------
    // Variable que indica si hay al menos un dígito
    let tieneDigito = false;

    // Recorre la contraseña nuevamente
    for (let i = 0; i < password.length; i++) {
        let caracter = password.charAt(i);
        // Verifica si el caracter está entre '0' y '9'
        if (caracter >= '0' && caracter <= '9') {
            tieneDigito = true;
            break; // Ya encontró un número, puede salir
        }
    }

    // Si no hay ningún número, agrega un mensaje de error
    if (!tieneDigito) {
        errores += "La contraseña debe contener al menos un número.\n";
    }

    // -------- VALIDAR CARACTER ESPECIAL --------
    // Variable que indica si tiene un caracter especial permitido
    let tieneEspecial = false;

    // Recorre todos los caracteres para buscar *, -, o _
    for (let i = 0; i < password.length; i++) {
        let caracter = password.charAt(i);
        // Comprueba si coincide con alguno de los permitidos
        if (caracter === '*' || caracter === '-' || caracter === '_') {
            tieneEspecial = true;
            break; // Sale del ciclo al encontrar uno
        }
    }

    // Si no tiene caracter especial, se agrega un mensaje de error
    if (!tieneEspecial) {
        errores += "La contraseña debe contener al menos un caracter especial (*, -, _).\n";
    }

    // Retorna todos los errores encontrados (si no hay, retorna cadena vacía)
    return errores;
}

// ------------------------------
// FUNCIÓN: ejecutarValidacion
// ------------------------------
// Esta función toma el valor ingresado por el usuario y muestra
// en pantalla si la contraseña es válida o qué errores tiene.
ejecutarValidacion = function() {
    // Obtiene el valor del campo de texto con id "txtPassword"
    let inputPassword = document.getElementById("txtPassword").value;

    // Llama a la función validarPassword y guarda el resultado
    let resultado = validarPassword(inputPassword);

    // Obtiene el div donde se mostrará el mensaje al usuario
    let divResultado = document.getElementById("resultado");

    // Si la función no devolvió errores, la contraseña es válida
    if (resultado === "") {
        // Muestra el mensaje en color verde
        divResultado.innerHTML = "<span style='color:green;'>Password Correcto </span>";
    } else {
        // Si hubo errores, los muestra en rojo, uno por línea
        divResultado.innerHTML = "<span style='color:red; white-space:pre-line;'>" + resultado + "</span>";
    }
}